# ma-tracker-app rules

## Multi-Device Sync Workflow
- Before ending a session, ensure all changes are committed and pushed.
- Use `pushall` command to sync both repos before switching machines.
- After making significant changes, commit with descriptive messages and push to GitHub.
- Production domain: https://dr3-dashboard.com
- Droplet: 134.199.204.12 (SSH alias: `droplet`)
- To deploy changes to droplet:
  1. Push to GitHub
  2. SSH to droplet and pull changes
  3. Rebuild Docker: `cd /home/don/apps/ma-tracker-app && docker build -t ma-tracker-app-dev . && cd .. && docker compose up -d web`

## Framework
- This is a Next.js 16 app using the App Router.
- /app/krj/page.tsx:
  - Reads CSVs from data/krj/*.csv.
  - Should remain read-only (no mutations), just a report viewer for KRJ signals.
  - Do not change the CSV location or naming scheme without explicit instruction.
- middleware.ts:
  - Provides NextAuth v5 authentication. Protected routes redirect to /login.
  - Do not remove or relax this auth without explicit instruction.
- Styling:
  - Use Tailwind utility classes consistent with existing patterns.

## UI Design Principles - HIGH DENSITY TRADER DASHBOARDS
- **Ruthlessly minimize vertical space**: Every pixel counts on trading dashboards.
  - Page padding: `px-3 py-2` (not `p-4` or larger)
  - Margins between sections: `mb-1` to `mb-3` (not `mb-4` or `mb-6`)
  - Tab lists: `mb-3` after tabs, `py-1.5` for tab triggers
  - Filter/control rows: inline layout with `py-1.5 px-3`, not stacked with `p-4`
  - Section spacing: `space-y-3` (not `space-y-6`)
- **Combine related elements on single rows**:
  - Title + subtitle on same row block (subtitle below title, no extra margin)
  - Status indicators + action buttons + user menu all on one header row
  - Filter labels inline with filter controls, not stacked
- **Keep font sizes readable but reduce surrounding whitespace**:
  - Maintain text-2xl for page titles, text-sm for body text
  - Reduce padding/margin around text, not the text size itself
- **Dark, high-contrast theme**: bg-gray-950, text-gray-100, no decorative fluff
- **Right-aligned numeric columns** with limited decimals and compact units
- **Allow header labels to wrap** rather than adding horizontal scroll
- **Place summary elements above/below tables**, not at the side

- /app/krj/page.tsx is a trader-facing report. Follow docs/krj_ui_style.md.
- Do not change CSV loading or data logic without explicit request.
- Styling changes should be implemented via Tailwind classes and small formatting helpers only.
